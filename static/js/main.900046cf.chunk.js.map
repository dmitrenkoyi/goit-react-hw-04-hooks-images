{"version":3,"sources":["components/Searchbar/Searchbar.js","components/Modal/Modal.js","components/ImageGalleryItem/ImageGalleryItem.js","components/Button/Button.js","Api/img-api.js","components/Loader/Loader.js","components/ImageGallery/ImageGallery.js","App.js","index.js"],"names":["Searchbar","formSubmit","useState","query","setQuery","className","onSubmit","e","preventDefault","type","autoComplete","autoFocus","placeholder","value","onChange","currentTarget","toLowerCase","modalRoot","document","querySelector","Modal","handleKeyDown","code","console","log","props","onClose","handleBackdropClick","event","target","window","addEventListener","this","removeEventListener","createPortal","onClick","children","Component","ImageGalleryItem","smallImg","largeImage","id","tags","largeImg","setLargeImg","showModal","setShowModal","toggleModal","src","alt","Button","api","fetchImages","imgName","currentPage","fetch","then","response","ok","json","Promise","reject","Error","LoaderSpinner","color","height","width","timeout","ImageGallery","setCurrentPage","images","setImages","error","setError","status","setStatus","useEffect","ImagesAPI","hits","length","scrollTo","top","documentElement","scrollHeight","behavior","catch","Loader","map","img","webformatURL","largeImageURL","App","data","ReactDOM","render","StrictMode","getElementById"],"mappings":"mOAsCeA,EApCG,SAAC,GAAkB,IAAjBC,EAAgB,EAAhBA,WAClB,EAA0BC,mBAAS,IAAnC,mBAAOC,EAAP,KAAcC,EAAd,KAaA,OACI,wBAAQC,UAAU,YAAlB,SACE,uBAAMC,SATS,SAACC,GACpBA,EAAEC,iBAEFP,EAAWE,GACXC,EAAU,KAKwBC,UAAU,aAAxC,UACE,wBAAQI,KAAK,SAASJ,UAAU,oBAAhC,SACE,sBAAMA,UAAU,0BAAhB,sBAGF,uBACEA,UAAU,mBACVI,KAAK,OACLC,aAAa,MACbC,WAAS,EACTC,YAAY,2BACZC,MAAOV,EACPW,SAzBgB,SAAAP,GACxBH,EAAUG,EAAEQ,cAAcF,MAAMG,wB,qCCH9BC,EAAYC,SAASC,cAAc,eAqC1BC,E,4MAxBbC,cAAgB,SAAAd,GACC,WAAXA,EAAEe,OACJC,QAAQC,IAAI,kKAEZ,EAAKC,MAAMC,Y,EAIfC,oBAAsB,SAAAC,GAChBA,EAAMb,gBAAkBa,EAAMC,QAChC,EAAKJ,MAAMC,W,uDApBf,WACEH,QAAQC,IAAI,2BACZM,OAAOC,iBAAiB,UAAWC,KAAKX,iB,kCAG1C,WACEE,QAAQC,IAAI,4BACZM,OAAOG,oBAAoB,UAAWD,KAAKX,iB,oBAiB7C,WACE,OAAOa,uBACL,qBAAK7B,UAAU,UAAU8B,QAASH,KAAKL,oBAAvC,SACE,qBAAKtB,UAAU,QAAf,SAAwB2B,KAAKP,MAAMW,aAErCnB,O,GA9BcoB,aCkCLC,EAnCU,SAAC,GAAwC,IAAtCC,EAAqC,EAArCA,SAAUC,EAA2B,EAA3BA,WAAYC,EAAe,EAAfA,GAAIC,EAAW,EAAXA,KACpD,EAAgCxC,mBAAS,IAAzC,mBAAOyC,EAAP,KAAiBC,EAAjB,KACA,EAAkC1C,oBAAS,GAA3C,mBAAO2C,EAAP,KAAkBC,EAAlB,KAEMC,EAAc,WAClBD,GAAcD,IAQf,OACG,qCACE,oBACExC,UAAU,mBAEVoC,GAAIA,EACJN,QAAS,kBAVfS,EAUkCJ,QATlCO,KAKI,SAME,qBAAKC,IAAKT,EAAUU,IAAKP,EAAMrC,UAAU,4BAJpCoC,GAONI,GACC,cAAC,EAAD,CAAOnB,QAASqB,EAAhB,SACE,qBAAKC,IAAKL,EAAUM,IAAI,WCtBrBC,EARA,SAAC,GAAiB,IAAff,EAAc,EAAdA,QAChB,OACE,wBAAQA,QAASA,EAAS1B,KAAK,SAASJ,UAAU,SAAlD,wBCaJ,IAIe8C,EAJH,CACVC,YAhBF,SAAqBC,EAASC,GAI5B,OAAOC,MAAM,GAAD,OAHK,2BAGL,cACOF,EADP,iBACuBC,EADvB,gBAFA,qCAEA,yDAEVE,MAAK,SAAAC,GACL,OAAIA,EAASC,GACJD,EAASE,OAGXC,QAAQC,OAAO,IAAIC,MAAJ,6BAAgCT,U,iBCQ3CU,G,kKAdb,WACE,OACE,cAAC,IAAD,CACEtD,KAAK,OACLuD,MAAM,UACNC,OAAQ,IACRC,MAAO,IACPC,QAAS,IACT9D,UAAU,sB,GATUgC,cCqFb+B,EAlFM,SAAC,GAAe,IAAbjE,EAAY,EAAZA,MACtB,EAAsCD,mBAAS,GAA/C,mBAAOoD,EAAP,KAAoBe,EAApB,KACA,EAA4BnE,mBAAS,IAArC,mBAAOoE,EAAP,KAAeC,EAAf,KACA,EAA0BrE,mBAAS,IAAnC,mBAAOsE,EAAP,KAAcC,EAAd,KACA,EAA4BvE,mBAAS,QAArC,mBAAOwE,EAAP,KAAeC,EAAf,KAyCA,OAvCAC,qBAAU,WACRP,EAAe,GACfE,EAAU,MACT,CAACpE,IAEJyE,qBAAU,WACHzE,IAILwE,EAAU,WAEVE,EAAUzB,YAAYjD,EAAOmD,GAC1BE,MAAK,SAAAC,GACJc,GAAU,SAACD,GAAD,4BAAgBA,GAAhB,YAA2Bb,EAASqB,UAC9CH,EAAU,YAEmB,IAAzBlB,EAASqB,KAAKC,SAChBN,EAAS,8LACTE,EAAU,gBAGbnB,MAAK,WACJ1B,OAAOkD,SAAS,CACdC,IAAK/D,SAASgE,gBAAgBC,aAC9BC,SAAU,cAGbC,OAAM,SAACb,GACNC,EAASD,GACTG,EAAU,kBAEb,CAACrB,EAAanD,IAOF,SAAXuE,EACO,qBAAKrE,UAAU,SAAf,kKAGM,YAAXqE,EAEA,8BACE,cAACY,EAAD,MAKS,aAAXZ,EACK,qBAAKrE,UAAU,eAAf,SAA+BmE,IAGzB,aAAXE,EAEA,qCACE,oBAAIrE,UAAU,eAAd,SACGiE,EAAOiB,KAAI,SAAAC,GAAG,OACb,cAAC,EAAD,CAEEjD,SAAUiD,EAAIC,aACdjD,WAAYgD,EAAIE,cAChBjD,GAAI+C,EAAI/C,GACRC,KAAM8C,EAAI9C,MAJL8C,EAAIC,mBAQdnB,EAAOS,OAAS,GAAK,cAAC,EAAD,CAAQ5C,QAAS,kBAAKkC,EAAef,EAAc,cAd/E,GC7CWqC,G,MAjBH,WACV,MAA0BzF,mBAAS,IAAnC,mBAAOC,EAAP,KAAcC,EAAd,KAME,OACE,sBAAKC,UAAU,MAAf,UACE,cAAC,EAAD,CAAWJ,WANQ,SAAA2F,GACvBxF,EAASwF,MAML,cAAC,EAAD,CAAczF,MAAOA,SCX7B0F,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,EAAD,MAEF7E,SAAS8E,eAAe,W","file":"static/js/main.900046cf.chunk.js","sourcesContent":["import { useState } from 'react';\n\nconst Searchbar = ({formSubmit}) => {\n  const [query, setQuery] = useState('');\n\n  const handleQueryChange = e => {\n    setQuery( e.currentTarget.value.toLowerCase() );\n  };\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n\n    formSubmit(query);\n    setQuery( '' );\n  };\n\n  return (\n      <header className=\"Searchbar\">\n        <form onSubmit={handleSubmit} className=\"SearchForm\">\n          <button type=\"submit\" className=\"SearchForm-button\">\n            <span className=\"SearchForm-button-label\">Search</span>\n          </button>\n\n          <input\n            className=\"SearchForm-input\"\n            type=\"text\"\n            autoComplete=\"off\"\n            autoFocus\n            placeholder=\"Search images and photos\"\n            value={query}\n            onChange={handleQueryChange}\n          />\n        </form>\n      </header>\n    );\n}\n\n\nexport default Searchbar;\n","import { Component } from 'react';\nimport { createPortal } from 'react-dom';\n\nconst modalRoot = document.querySelector('#modal-root');\n\nclass Modal extends Component {\n  componentDidMount() {\n    console.log('Modal componentDidMount');\n    window.addEventListener('keydown', this.handleKeyDown);\n  }\n\n  componentWillUnmount() {\n    console.log('Modal componentDidUpdate');\n    window.removeEventListener('keydown', this.handleKeyDown);\n  }\n\n  handleKeyDown = e => {\n    if (e.code === 'Escape') {\n      console.log('Нажали ESC, нужно закрыть модалку');\n\n      this.props.onClose();\n    }\n  };\n\n  handleBackdropClick = event => {\n    if (event.currentTarget === event.target) {\n      this.props.onClose();\n    }\n  };\n\n  render() {\n    return createPortal(\n      <div className=\"Overlay\" onClick={this.handleBackdropClick}>\n        <div className=\"Modal\">{this.props.children}</div>\n      </div>,\n      modalRoot,\n    );\n  }\n}\n\nexport default Modal;\n","import { useState } from 'react';\n\nimport Modal from '../Modal';\n\nconst ImageGalleryItem = ({ smallImg, largeImage, id, tags }) => {\n  const [largeImg, setLargeImg] = useState('');\n  const [showModal, setShowModal] = useState(false);\n\n  const toggleModal = () => {\n    setShowModal(!showModal);\n  };\n\n  const onImageClick = img => {\n    setLargeImg(img);\n    toggleModal();\n  };\n\n   return (\n      <>\n        <li\n          className=\"ImageGalleryItem\"\n          key={id}\n          id={id}\n          onClick={() => onImageClick(largeImage)}\n        >\n          <img src={smallImg} alt={tags} className=\"ImageGalleryItem-image\" />\n        </li>\n\n        {showModal && (\n          <Modal onClose={toggleModal}>\n            <img src={largeImg} alt=\"\" />\n          </Modal>\n        )}\n      </>\n    );\n}\n\n\n\nexport default ImageGalleryItem;\n","const Button = ({ onClick }) => {\n  return (\n    <button onClick={onClick} type=\"button\" className=\"Button\">\n      Load more\n    </button>\n  );\n};\n\nexport default Button;\n","function fetchImages(imgName, currentPage) {\n  const BASE_URL = 'https://pixabay.com/api/';\n  const KEY = '21948624-31b67ed2e94e468d71d1f3d1d';\n\n  return fetch(\n    `${BASE_URL}?q=${imgName}&page=${currentPage}&key=${KEY}&image_type=photo&orientation=horizontal&per_page=12`,\n  ).then(response => {\n    if (response.ok) {\n      return response.json();\n    }\n\n    return Promise.reject(new Error(`No image with name ${imgName}`));\n  });\n}\n\nconst api = {\n  fetchImages,\n};\n\nexport default api;\n","import { Component } from 'react';\nimport Loader from 'react-loader-spinner';\nimport 'react-loader-spinner/dist/loader/css/react-spinner-loader.css';\n\nclass LoaderSpinner extends Component {\n  render() {\n    return (\n      <Loader\n        type=\"Oval\"\n        color=\"#00BFFF\"\n        height={100}\n        width={100}\n        timeout={3000}\n        className=\"LoaderSpinner\"\n      />\n    );\n  }\n}\n\nexport default LoaderSpinner;\n","import { useState, useEffect } from 'react';\n\nimport ImageGalleryItem from '../ImageGalleryItem';\nimport Button from '../Button';\nimport ImagesAPI from '../../Api/img-api';\nimport LoaderSpinner from '../Loader';\n\nconst ImageGallery = ({ query }) => {\n  const [currentPage, setCurrentPage] = useState(1);\n  const [images, setImages] = useState([]);\n  const [error, setError] = useState('');\n  const [status, setStatus] = useState('idle');\n\n  useEffect(() => {\n    setCurrentPage(1);\n    setImages([]);\n  }, [query]);\n\n  useEffect(() => {\n    if (!query) {\n      return;\n    };\n\n    setStatus('pending'); \n   \n    ImagesAPI.fetchImages(query, currentPage)\n      .then(response => {\n        setImages((images) => [...images, ...response.hits]);\n        setStatus('resolved');\n\n        if (response.hits.length === 0) {\n          setError('По вашему запросу ничего не найдено.');\n          setStatus('rajected');\n        };\n      })\n      .then(() => {\n        window.scrollTo({\n          top: document.documentElement.scrollHeight,\n          behavior: 'smooth',\n        });\n      })\n      .catch((error) => {\n        setError(error);\n        setStatus('rajected');\n      });\n  }, [currentPage, query]\n  );    \n   \n  // const onLoadMore = () => {\n  //   setCurrentPage(state => state + 1);\n  // }\n\n  if (status === 'idle') {\n      return <div className=\"Status\">Введите запрос в поле поиска</div>;\n    }\n\n    if (status === 'pending') {\n      return (\n        <div>          \n          <LoaderSpinner />\n        </div>\n      );\n    }\n\n    if (status === 'rajected') {\n      return <div className=\"Status-error\">{error}</div>;\n    }\n\n    if (status === 'resolved') {\n      return (\n        <>\n          <ul className=\"ImageGallery\">\n            {images.map(img => (\n              <ImageGalleryItem\n                key={img.webformatURL}\n                smallImg={img.webformatURL}\n                largeImage={img.largeImageURL}\n                id={img.id}\n                tags={img.tags}\n              />\n            ))}\n          </ul>\n          {images.length > 0 && <Button onClick={()=> setCurrentPage(currentPage + 1)} />}\n        </>\n      );\n    }\n}\n\n\nexport default ImageGallery;","import { useState} from 'react';\nimport Searchbar from './components/Searchbar';\nimport ImageGallery from './components/ImageGallery';\n\nimport './styles.css';\n\nconst App = () => {\n  const [query, setQuery] = useState('');\n\n  const handleFormSubmit = data => {\n    setQuery(data);\n  };\n   \n    return (\n      <div className=\"App\">\n        <Searchbar formSubmit={handleFormSubmit} />\n        <ImageGallery query={query} />\n      </div>\n    );\n}\n\n\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n// import './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\n"],"sourceRoot":""}